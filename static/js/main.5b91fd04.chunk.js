(this["webpackJsonpreact-trello"]=this["webpackJsonpreact-trello"]||[]).push([[0],{36:function(t,e,r){},55:function(t,e,r){},57:function(t,e,r){},66:function(t,e,r){},67:function(t,e,r){},68:function(t,e,r){},69:function(t,e,r){},70:function(t,e,r){},71:function(t,e,r){"use strict";r.r(e);var i=r(1),s=r.n(i),n=r(28),a=r.n(n),o=(r(36),r(31)),c=r(8),l=r(9),d=r(11),u=r(10),h=r(13),b=r(2),j=r(19),f={baseURL:"https://trello-back.shpp.me/asadov/api/v1",boards:"board/"},m=r(29),p=r.n(m).a.create({baseURL:f.baseURL,headers:{"Content-Type":"application/json",Authorization:"Bearer 123"}});p.interceptors.response.use((function(t){return t.data}));var O=p,w=function(t){return O.post(f.boards,{title:t})},v=function(t){return O.delete(f.boards+t)},g=(r(55),r(0));function T(t){var e=t.title,r=t.onChangeFunc,i=t.onSubmitFunc,s=t.onCancelFunc;return Object(g.jsx)("div",{className:"add-form__modal",onClick:s,children:Object(g.jsxs)("form",{className:"add-form",onSubmit:i,onClick:function(t){return t.stopPropagation()},children:[Object(g.jsx)("label",{className:"add-form__title",htmlFor:"newTitle",children:"New board title"}),Object(g.jsx)("input",{className:"add-form__input input",placeholder:"Type new board title here...",id:"newTitle",value:e,onChange:r}),Object(g.jsx)("button",{className:"add-form__btn",children:"Add board"})]})})}r(57);function x(t){var e=t.board,r=e.id,i=e.title,s=t.onClickFunc;return Object(g.jsxs)("div",{className:"board-tmb",children:[Object(g.jsx)(h.b,{to:"/board/".concat(r),className:"board-tmb__link",children:i}),Object(g.jsx)("button",{className:"board-tmb__btn",onClick:function(){return s(r)},children:"x"})]})}r(66);var E=function(t){Object(d.a)(r,t);var e=Object(u.a)(r);function r(){var t;Object(c.a)(this,r);for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).showError=t.props.showError,t.state={boards:[],isBoardCreatorVisible:!1,newTitle:""},t.showBoardCreator=function(){t.setState({isBoardCreatorVisible:!0})},t.hideBoardCreator=function(){t.setState({isBoardCreatorVisible:!1})},t.changeTitleInput=function(e){t.setState({newTitle:e.target.value})},t.submitNewBoard=function(e){e.preventDefault(),w(t.state.newTitle).finally(t.setState({isBoardCreatorVisible:!1})).then((function(e){t.setState((function(r){return{boards:[].concat(Object(j.a)(r.boards),[{id:e.id,title:t.state.newTitle}]),newTitle:""}}))})).catch((function(e){t.showError("Error while create board",e.message)}))},t.delBoard=function(e){v(e).then((function(r){var i=t.state.boards.filter((function(t){return t.id!==e}));t.setState({boards:Object(j.a)(i)})})).catch((function(e){t.showError("Error while delete board",e.message)}))},t}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var t=this;O.get(f.boards).then((function(e){var r=e.boards;t.setState({boards:r})})).catch((function(e){t.showError("Error while get boards",e.message)}))}},{key:"makeBoards",value:function(){var t=this;return this.state.boards.map((function(e){return Object(g.jsx)(x,{board:e,onClickFunc:t.delBoard},e.id)}))}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:"home-container",children:[Object(g.jsx)("h1",{className:"boards__title",children:"My boards"}),this.state.boards.length>0&&Object(g.jsxs)("div",{className:"boards",children:[this.makeBoards(),Object(g.jsx)("button",{className:"boards__btn",onClick:this.showBoardCreator,children:"Add board"})]}),this.state.isBoardCreatorVisible&&Object(g.jsx)(T,{title:this.state.newTitle,onChangeFunc:this.changeTitleInput,onSubmitFunc:this.submitNewBoard,onCancelFunc:this.hideBoardCreator})]})}}]),r}(s.a.Component),C=function(t,e){return O.put(f.boards+t,{title:e})};r(67);function N(t){var e=t.title,r=t.message;return Object(g.jsxs)("div",{className:"error__box",children:[Object(g.jsx)("h2",{className:"error__title",children:e}),Object(g.jsx)("p",{className:"error__message",children:r})]})}r(68);var k=function(t){Object(d.a)(r,t);var e=Object(u.a)(r);function r(t){var i;return Object(c.a)(this,r),(i=e.call(this,t)).toggleTitleEditor=function(){i.setState((function(t){return{isListTitleEditorVisible:!t.isListTitleEditorVisible}}))},i.showError=function(t,e){i.setState({error:{title:t,message:e}}),setTimeout((function(){return i.setState({error:{title:"",message:""}})}),3e3)},i.changeTitleInput=function(t){i.setState({newTitle:t.target.value})},i.submitNewTitle=function(){var t,e,r;(t=i.boardId,e=i.state.id,r=i.state.newTitle,O.put(f.boards+t+"/list/"+e,{title:r})).finally(i.setState({isListTitleEditorVisible:!1})).then((function(t){i.setState((function(t){return{title:t.newTitle,newTitle:""}}))})).catch((function(t){i.showError("Error while update list",t.message)}))},i.keyUpFunc=function(t){"Enter"===t.code&&i.submitNewTitle()},i.boardId=t.boardId,i.state={error:{title:"",message:""},id:t.list.id,title:t.list.title,cards:t.list.cards,position:t.list.position,newTitle:"",isListTitleEditorVisible:!1},i}return Object(l.a)(r,[{key:"makeCards",value:function(){return Object.values(this.state.cards).map((function(t){return Object(g.jsxs)("h3",{children:[" ",t.title," "]},t.id)}))}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:"list",children:[Object(g.jsx)("header",{className:"header",children:this.state.isListTitleEditorVisible?Object(g.jsx)("input",{className:"list-title__input input",placeholder:"Type new board title here...",value:this.state.newTitle,onChange:this.changeTitleInput,onBlur:this.submitNewTitle,onKeyUp:this.keyUpFunc}):Object(g.jsx)("h2",{className:"list-title",onClick:this.toggleTitleEditor,children:this.state.title})}),Object(g.jsx)("div",{children:this.makeCards()}),this.state.error.title&&Object(g.jsx)(N,{title:this.state.error.title,message:this.state.error.message})]})}}]),r}(s.a.Component),y=(r(69),function(t){Object(d.a)(r,t);var e=Object(u.a)(r);function r(){var t;Object(c.a)(this,r);for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).boardId=t.props.match.params.id,t.showError=t.props.showError,t.state={title:"",lists:{},users:[],newTitle:"",isBoardTitleEditorVisible:!1},t.toggleTitleEditor=function(){t.setState((function(t){return{isBoardTitleEditorVisible:!t.isBoardTitleEditorVisible}}))},t.changeTitleInput=function(e){t.setState({newTitle:e.target.value})},t.submitNewTitle=function(){C(t.boardId,t.state.newTitle).finally(t.setState({isBoardTitleEditorVisible:!1})).then((function(e){t.setState((function(t){return{title:t.newTitle,newTitle:""}}))})).catch((function(e){t.showError("Error while update board",e.message)}))},t.keyUpFunc=function(e){"Enter"===e.code&&t.submitNewTitle()},t}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var t,e=this;(t=this.boardId,O.get(f.boards+t)).then((function(t){var r=t.title,i=t.lists,s=t.users;e.setState({title:r,lists:i,users:s})})).catch((function(t){e.showError("Error while get board",t.message)}))}},{key:"makeLists",value:function(){var t=this;return Object.values(this.state.lists).map((function(e){return Object(g.jsx)(k,{boardId:t.boardId,list:e},e.id)}))}},{key:"render",value:function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("header",{className:"header",children:[Object(g.jsx)(h.b,{className:"home-link",to:"/",children:"Home"}),Object(g.jsx)("h1",{className:"board-title",onClick:this.toggleTitleEditor,children:this.state.title}),this.state.isBoardTitleEditorVisible&&Object(g.jsx)("input",{className:"board-title__input input",placeholder:"Type new board title here...",value:this.state.newTitle,onChange:this.changeTitleInput,onBlur:this.submitNewTitle,onKeyUp:this.keyUpFunc})]}),Object(g.jsx)("div",{className:"lists",children:this.makeLists()})]})}}]),r}(s.a.Component)),_=(r(70),function(t){Object(d.a)(r,t);var e=Object(u.a)(r);function r(){var t;Object(c.a)(this,r);for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).state={error:{title:"",message:""}},t.showError=function(e,r){t.setState({error:{title:e,message:r}}),setTimeout((function(){return t.setState({error:{title:"",message:""}})}),2e3)},t}return Object(l.a)(r,[{key:"render",value:function(){var t=this;return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(h.a,{children:Object(g.jsxs)(b.d,{children:[Object(g.jsx)(b.b,{exact:!0,path:"/",children:Object(g.jsx)(E,{showError:this.showError})}),Object(g.jsx)(b.b,{path:"/board/:id",children:function(e){return Object(g.jsx)(y,Object(o.a)({showError:t.showError},e))}}),Object(g.jsx)(b.a,{from:"/react-trello",to:"/"})]})}),this.state.error.title&&Object(g.jsx)(N,{title:this.state.error.title,message:this.state.error.message})]})}}]),r}(s.a.Component)),B=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,72)).then((function(e){var r=e.getCLS,i=e.getFID,s=e.getFCP,n=e.getLCP,a=e.getTTFB;r(t),i(t),s(t),n(t),a(t)}))};a.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(_,{})}),document.getElementById("root")),B()}},[[71,1,2]]]);
//# sourceMappingURL=main.5b91fd04.chunk.js.map