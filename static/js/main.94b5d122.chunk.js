(this["webpackJsonpreact-trello"]=this["webpackJsonpreact-trello"]||[]).push([[0],{36:function(t,e,r){},55:function(t,e,r){},57:function(t,e,r){},66:function(t,e,r){},67:function(t,e,r){},68:function(t,e,r){},69:function(t,e,r){},70:function(t,e,r){},71:function(t,e,r){},72:function(t,e,r){"use strict";r.r(e);var n=r(1),a=r.n(n),s=r(29),i=r.n(s),o=(r(36),r(15)),c=r(8),l=r(9),u=r(11),d=r(10),b=r(13),h=r(2),j=r(20),m={baseURL:"https://trello-back.shpp.me/asadov/api/v1",boards:"board/"},f=r(30),p=r.n(f).a.create({baseURL:m.baseURL,headers:{"Content-Type":"application/json",Authorization:"Bearer 123"}});p.interceptors.response.use((function(t){return t.data}));var O=p,v=function(t){return O.post(m.boards,{title:t})},w=function(t){return O.delete(m.boards+t)},g=(r(55),r(0));function x(t){var e=t.title,r=t.onChangeFunc,n=t.onSubmitFunc,a=t.onCancelFunc;return Object(g.jsx)("div",{className:"add-form__modal",onClick:a,children:Object(g.jsxs)("form",{className:"add-form",onSubmit:n,onClick:function(t){return t.stopPropagation()},children:[Object(g.jsx)("label",{className:"add-form__title",htmlFor:"newTitle",children:"New board title"}),Object(g.jsx)("input",{className:"add-form__input input",placeholder:"Type new board title here...",id:"newTitle",value:e,onChange:r}),Object(g.jsx)("button",{className:"add-form__btn",children:"Add board"})]})})}r(57);function C(t){var e=t.board,r=e.id,n=e.title,a=t.onClickFunc;return Object(g.jsxs)("div",{className:"board-tmb",children:[Object(g.jsx)(b.b,{to:"/board/".concat(r),className:"board-tmb__link",children:n}),Object(g.jsx)("button",{className:"board-tmb__btn",onClick:function(){return a(r)},children:"x"})]})}r(66);var E=function(t){Object(u.a)(r,t);var e=Object(d.a)(r);function r(){var t;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))).showError=t.props.showError,t.state={boards:[],isBoardCreatorVisible:!1,newTitle:""},t.showBoardCreator=function(){t.setState({isBoardCreatorVisible:!0})},t.hideBoardCreator=function(){t.setState({isBoardCreatorVisible:!1})},t.changeTitleInput=function(e){t.setState({newTitle:e.target.value})},t.submitNewBoard=function(e){e.preventDefault(),v(t.state.newTitle).finally(t.hideBoardCreator).then((function(e){t.setState((function(r){return{boards:[].concat(Object(j.a)(r.boards),[{id:e.id,title:t.state.newTitle}]),newTitle:""}}))})).catch((function(e){t.showError("Error while create board",e.message)}))},t.delBoard=function(e){w(e).then((function(r){var n=t.state.boards.filter((function(t){return t.id!==e}));t.setState({boards:Object(j.a)(n)})})).catch((function(e){t.showError("Error while delete board",e.message)}))},t}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var t=this;O.get(m.boards).then((function(e){var r=e.boards;t.setState({boards:r})})).catch((function(e){t.showError("Error while get boards",e.message)}))}},{key:"makeBoards",value:function(){var t=this;return this.state.boards.map((function(e){return Object(g.jsx)(C,{board:e,onClickFunc:t.delBoard},e.id)}))}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:"home-container",children:[Object(g.jsx)("h1",{className:"boards__title",children:"My boards"}),this.state.boards.length>0&&Object(g.jsxs)("div",{className:"boards",children:[this.makeBoards(),Object(g.jsx)("button",{className:"boards__btn",onClick:this.showBoardCreator,children:"Add board"})]}),this.state.isBoardCreatorVisible&&Object(g.jsx)(x,{title:this.state.newTitle,onChangeFunc:this.changeTitleInput,onSubmitFunc:this.submitNewBoard,onCancelFunc:this.hideBoardCreator})]})}}]),r}(a.a.Component),N=function(t,e){return O.put(m.boards+t,{title:e})},T=(r(67),function(t){Object(u.a)(r,t);var e=Object(d.a)(r);function r(){var t;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))).onSubmitTitle=t.props.onSubmitTitle,t.state={newTitle:t.props.title,isEditorVisible:!1},t.onChangeInput=function(e){t.setState({newTitle:e.target.value})},t.onSubmitFunc=function(){t.toggleEditor(),t.onSubmitTitle(t.state.newTitle)},t.onKeyUpFunc=function(e){"Enter"===e.code&&t.onSubmitFunc()},t.toggleEditor=function(){t.setState((function(t){return{isEditorVisible:!t.isEditorVisible}}))},t}return Object(l.a)(r,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"title__box",children:[Object(g.jsx)("h2",{className:"title",onClick:this.toggleEditor,children:this.props.title}),this.state.isEditorVisible&&Object(g.jsx)("input",{className:"title__input input",placeholder:"Type new title here...",value:this.state.newTitle,onChange:this.onChangeInput,onBlur:this.onSubmitFunc,onKeyUp:this.onKeyUpFunc})]})}}]),r}(a.a.Component)),k=(r(68),function(t){Object(u.a)(r,t);var e=Object(d.a)(r);function r(t){var n;return Object(c.a)(this,r),(n=e.call(this,t)).submitNewTitle=function(t){(function(t,e,r){return O.put(m.boards+t+"/list/"+e,{title:r})})(n.boardId,n.state.id,t).then((function(e){n.setState({title:t})})).catch((function(t){n.showError("Error while update list",t.message)}))},n.boardId=t.boardId,n.showError=t.showError,n.state=Object(o.a)({},t.list),n}return Object(l.a)(r,[{key:"makeCards",value:function(){return Object.values(this.state.cards).map((function(t){return Object(g.jsxs)("h3",{children:[" ",t.title," "]},t.id)}))}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:"list",children:[Object(g.jsx)(T,{className:"list__title",title:this.state.title,onSubmitTitle:this.submitNewTitle}),Object(g.jsx)("div",{children:this.makeCards()})]})}}]),r}(a.a.Component)),_=(r(69),function(t){Object(u.a)(r,t);var e=Object(d.a)(r);function r(){var t;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))).boardId=t.props.match.params.id,t.showError=t.props.showError,t.state={title:"",lists:{},users:[]},t.submitNewTitle=function(e){N(t.boardId,e).then((function(r){t.setState({title:e})})).catch((function(e){t.showError("Error while update board",e.message)}))},t}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var t,e=this;(t=this.boardId,O.get(m.boards+t)).then((function(t){var r=t.title,n=t.lists,a=t.users;e.setState({title:r,lists:n,users:a})})).catch((function(t){e.showError("Error while get board",t.message)}))}},{key:"makeLists",value:function(){var t=this;return Object.values(this.state.lists).map((function(e){return Object(g.jsx)(k,{boardId:t.boardId,list:e,showError:t.showError},e.id)}))}},{key:"render",value:function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("header",{className:"header",children:[Object(g.jsx)(b.b,{className:"home-link",to:"/",children:"Home"}),this.state.title&&Object(g.jsx)(T,{title:this.state.title,onSubmitTitle:this.submitNewTitle})]}),Object(g.jsx)("div",{className:"lists",children:this.makeLists()})]})}}]),r}(a.a.Component));r(70);function y(t){var e=t.title,r=t.message;return Object(g.jsxs)("div",{className:"error__box",children:[Object(g.jsx)("h2",{className:"error__title",children:e}),Object(g.jsx)("p",{className:"error__message",children:r})]})}r(71);var S=function(t){Object(u.a)(r,t);var e=Object(d.a)(r);function r(){var t;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))).state={error:{title:"",message:""}},t.showError=function(e,r){t.setState({error:{title:e,message:r}}),setTimeout((function(){return t.setState({error:{title:"",message:""}})}),2e3)},t}return Object(l.a)(r,[{key:"render",value:function(){var t=this;return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(b.a,{children:Object(g.jsxs)(h.d,{children:[Object(g.jsx)(h.b,{exact:!0,path:"/",children:Object(g.jsx)(E,{showError:this.showError})}),Object(g.jsx)(h.b,{path:"/board/:id",children:function(e){return Object(g.jsx)(_,Object(o.a)({showError:t.showError},e))}}),Object(g.jsx)(h.a,{from:"/react-trello",to:"/"})]})}),this.state.error.title&&Object(g.jsx)(y,{title:this.state.error.title,message:this.state.error.message})]})}}]),r}(a.a.Component),B=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,73)).then((function(e){var r=e.getCLS,n=e.getFID,a=e.getFCP,s=e.getLCP,i=e.getTTFB;r(t),n(t),a(t),s(t),i(t)}))};i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(S,{})}),document.getElementById("root")),B()}},[[72,1,2]]]);
//# sourceMappingURL=main.94b5d122.chunk.js.map